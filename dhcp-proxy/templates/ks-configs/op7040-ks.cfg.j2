# Generated by Anaconda 34.25.4.9
# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
# graphical
text
repo --name="AppStream" --baseurl=http://install.internal.tjon.net/Linux/rhel/9/x86_64/AppStream

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'
# System language
lang en_US.UTF-8

# Network information
network  --bootproto=static --device=eth0 --gateway=172.16.1.1 --ip=172.16.1.4 --nameserver=172.16.1.2 --netmask=255.255.255.0 --noipv6 --activate --ipv4-dns-search=internal.tjon.net
network  --bootproto=dhcp --device=eth1 --onboot=off --ipv6=auto
network  --bootproto=dhcp --device=eth2 --onboot=off --ipv6=auto
network  --bootproto=dhcp --device=eth3 --onboot=off --ipv6=auto
network  --bootproto=dhcp --device=eth4 --onboot=off --ipv6=auto
network  --hostname=op7040.internal.tjon.net

# Use network installation
url --url="http://install.internal.tjon.net//Linux/rhel/9/x86_64"

%packages
#@^graphical-server-environment

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=nvme0n1
# Partition clearing information
clearpart --none --initlabel
# Disk partitioning information
part pv.355 --fstype="lvmpv" --ondisk=nvme0n1 --size=1907088
part /boot --fstype="xfs" --ondisk=nvme0n1 --size=512 --label=boot
part /boot/efi --fstype="efi" --ondisk=nvme0n1 --size=128 --fsoptions="umask=0077,shortname=winnt" --label=bootefi
volgroup rootvg --pesize=4096 pv.355
logvol /tmp --fstype="xfs" --size=10240 --label="tmp" --name=tmplv --vgname=rootvg
logvol /home --fstype="xfs" --size=5120 --label="home" --name=homelv --vgname=rootvg
logvol /var/lib/libvirt/images --fstype="xfs" --size=1048576 --label="images" --name=imageslv --vgname=rootvg
logvol /var/log --fstype="xfs" --size=2048 --label="log" --name=loglv --vgname=rootvg
logvol /scratch --fstype="ext4" --size=763248 --label="scratch" --name=scratchlv --vgname=rootvg
logvol /opt --fstype="xfs" --size=32 --label="opt" --name=optlv --vgname=rootvg
logvol swap --fstype="swap" --size=65536 --name=swaplv --vgname=rootvg
logvol /var --fstype="xfs" --size=1024 --label="var" --name=varlv --vgname=rootvg
logvol / --fstype="xfs" --size=1024 --label="root" --name=rootlv --vgname=rootvg
logvol /usr --fstype="xfs" --size=6140 --label="usr" --name=usrlv --vgname=rootvg
logvol /var/cache --fstype="xfs" --size=4096 --label="cache" --name=cachelv --vgname=rootvg

timesource --ntp-server=ds224.internal.tjon.net
# System timezone
timezone America/Phoenix --utc

# Root password
rootpw --iscrypted {{root_pw_hash}}

# Define user
user --groups=wheel --name={{user_name}} --password={{user_pw_hash}} --iscrypted --gecos={{gecos_name}}
